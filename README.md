# Преобразования
## Задание
Назовём преобразованием целого числа n применение одной из следующих операций:

1. n -> n + 1
2. n -> n + 2
3. n -> 2n

Напишите программу, которая по заданным числам n и m определяет длину кратчайшей последовательности преобразований, которая переводит число n в число m (0 &le; n &le; m &le; 10<sup>15</sup>).

Пример:
n=5, m=13

Ответ: 3

## Решение
Многократное применение преобразований 1, 2 и 3 к переменной n можно записать в следующем виде:

2(2(2( ... 2(2(n + a<sub>K</sub>) + a<sub>K-1</sub>) + ... + a<sub>3</sub>) + a<sub>2</sub>) + a<sub>1</sub>) + a<sub>0</sub> =

= 2<sup>K</sup>n + 2<sup>K</sup>a<sub>K</sub> + 2<sup>K-1</sup>a<sub>K-1</sub> + ... + 2<sup>2</sup>a<sub>2</sub> + 2<sup>1</sup>a<sub>1</sub> + 2<sup>0</sup>a<sub>0</sub> =

![=2^{K}n+\\sum_{i=0}^{K}2^{i}a_{i}=m](https://latex.codecogs.com/gif.latex?=2^{K}n&plus;\\sum_{i=0}^{K}2^{i}a_{i}=m)

где:
- K - количество применений операции 3. Может принимать значения от 0 до 
![\\left \\lfloor log_{2}(m) \\right \\rfloor](https://latex.codecogs.com/gif.latex?\\left&space;\\lfloor&space;log_{2}(m)&space;\\right&space;\\rfloor).
Скобки ![\\left \\lfloor \\right \\rfloor](https://latex.codecogs.com/gif.latex?\\left&space;\\lfloor&space;\\right&space;\\rfloor) обозначаю целую часть.
- a<sub>i</sub> - результат многократного применения операций 1 и 2 после (K-i)-ого применения 3-ей операции. 
Количество примененных операций 1 и 2 найдем жадным алгоритмом:
если a<sub>i</sub> - четно, т.е. a<sub>i</sub>=2L, то количество операций равняется L,
если a<sub>i</sub> - нечетно, т.е. a<sub>i</sub>=2L+1, то количество операций равняется L+1.

Итак, что бы найти минимальное количество операций надо решить следующую задачу минимизации:

Среди всех K от 0 до ![\\left \\lfloor log_{2}(m) \\right \\rfloor](https://latex.codecogs.com/gif.latex?\\left&space;\\lfloor&space;log_{2}(m)&space;\\right&space;\\rfloor)

найти ![min\left ( \sum_{i=0}^{K}a_{i} \right )](https://latex.codecogs.com/gif.latex?min\\left&space;(&space;\\sum_{i=0}^{K}a_{i}&space;\\right&space;))

при ограничениях:
- a<sub>i</sub> &ge; 0, для всех i
- ![\\sum_{i=0}^{K}2^{i}a_{i}=m-2^{K}n](https://latex.codecogs.com/gif.latex?\\sum_{i=0}^{K}2^{i}a_{i}=m-2^{K}n)

Минимумы будем искать жадным алгоритмом.

Для каждого найденного K-го минимума сопоставим количество операций. Ответом на задачу будет минимум из всех количеств операций.

## Узкое место
При всей кажущейся логичности рассуждений, отсутствует доказательство, что при заданном количестве 3-их операций
поиск минимума сумм a<sub>i</sub> эквивалентен поиску минимума количества 1-ых и 2-ых операций.

Например, пусть найдены a<sub>i</sub>, приводящие к минимуму. Возьмем некоторые a<sub>p</sub> и a<sub>q</sub>, про которые известно, что они оба неченты.
Значит, вклад в количество операций от них составляет L<sub>p</sub>+1 и L<sub>q</sub>+1 соответствено.
Предположим, что существует еще один минимум, при котором a'<sub>p</sub> = a<sub>p</sub>-1 и a'<sub>q</sub> = a<sub>q</sub>+1 и этот минимум не определяется жадным алгоритмом.
Вклад в количество операций от них составляет L<sub>p</sub> и L<sub>q</sub>+1 соответствено. В результате, предложенным алгоритмом можно не найти оптимальное решение
